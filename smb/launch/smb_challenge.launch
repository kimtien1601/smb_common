<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <arg name="sim"                default="true"/>

  <!-- mpc -->
  <arg name="mpc"
       default="false"
       doc="Launch the MPC node."/>

  <arg name="mpc_track_local_plan"
       default="false"
       doc="Track the plan published from the mpc_path_publisher.py script in smb_mpc package."/>

  <!-- smb_slam arguments -->
  <arg name="map_name"            default="map.pcd" /> 
  <arg name="pcd_filepath"        default="$(find smb_slam)/maps/$(arg map_name)" />

  <!-- smb_navigation arguments -->
  <arg name="use_global_map"     default="false"/>
  <arg name="global_frame"       default="map"/>

    <!-- smb_navigation navigate2d -->
    <arg name="navigate2d"
        default="false"/>

  <!-- start smb launch -->
  <include file="$(find smb)/launch/smb.launch">
    <arg name="mpc"                      value="$(arg mpc)"/>
  </include>

  <!-- start smb_slam launch -->
  <include file="$(find smb_slam)/launch/localization.launch">
    <arg name="map_name"                      value="$(arg map_name)"/>
    <arg name="pcd_filepath"                  value="$(arg pcd_filepath)"/>
    <arg name="global_map"            default="$(find smb_navigation)/data/real/map.yaml"/>
  </include>
  <!-- relocation publisher change this after measurement-->
  <node pkg="smb_slam" type="relocalize.py" name="relocalize_tf_publisher"></node>
  <!-- <node pkg="tf" type="static_transform_publisher" name="challenge_tf_broadcaster" args="-4.11 8.77 0 0 0 0.68 0.73 map challenge_tf 100" /> -->

  <!-- start smb_navigation navigate2d launch -->
  <group if="$(arg navigate2d)">
    <include file="$(find smb_navigation)/launch/navigate2d_ompl.launch">
      <arg name="use_global_map"    value="$(arg use_global_map)"/>
      <arg name="global_frame"      value="$(arg use_global_map)"/>
      <arg name="sim"               value="$(arg sim)"/>
      <arg name="global_map"        value="$(arg global_map)"/>
    </include>
  </group>

  <!-- start smb_opc launch -->
  <!-- <include file="$(find smb_opc)/launch/opc.launch">
    <arg name="map_name"                      value="$(arg map_name)"/>
  </include> -->

</launch>
